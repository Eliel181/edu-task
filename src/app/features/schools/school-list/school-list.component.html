<!-- school-list.component.html -->
<div class="max-w-8xl px-1 py-10 sm:px-2 lg:px-4 mx-auto font_outfit dark:bg-[#1A1A1E]">
  <div class="bg-[#fcfdfe] dark:bg-[#2A2433] rounded-3xl p-4 sm:p-4 shadow-[0_2px_6px_rgba(0,0,0,0.05)]">
    <!-- Header de la sección de escuelas -->
    <div class="mb-8">
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-end gap-4">
        <!-- Título y descripción a la izquierda -->
        <div class="flex-grow">
          <h2 class="text-xl font-semibold text-[#2d2c63] dark:text-[#E4E4E7]">Gestión de Escuelas</h2>
          <p class="text-sm text-[#9291aa] dark:text-slate-400 mt-2">
            Administra de forma eficiente las escuelas de tu plataforma.
          </p>

          <!-- Barra de búsqueda ahora debajo de la descripción -->
          <div class="mt-4 relative max-w-md">
            <input type="text" id="school-search-input" (input)="onBusquedaChange($event)"
              class="py-2.5 px-4 ps-11 block w-full bg-white dark:bg-[#443a52] dark:border-slate-700 dark:text-[#E4E4E7] rounded-xl text-sm text-[#707078] focus:border-[#5956e9] focus:ring-[#5956e9] shadow-2xs"
              placeholder="Buscar por CUE, nombre...">
            <div class="absolute inset-y-0 start-0 flex items-center pointer-events-none ps-4">
              <svg class="size-4 text-[#9291aa]" viewBox="0 0 16 16" fill="currentColor">
                <path
                  d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
              </svg>
            </div>
          </div>
        </div>

        <!-- Controles a la derecha -->
        <div class="flex flex-col sm:flex-row items-end gap-3 w-full sm:w-auto">
          <!-- Botón Agregar Escuela -->
          <a routerLink="form-escuela/nuevo"
            class="py-2.5 px-6 inline-flex items-center justify-center gap-x-2 text-sm font-medium rounded-xl border border-transparent bg-[#5956e9] text-white hover:bg-[#4a47d8] transition-colors duration-200 whitespace-nowrap w-full sm:w-auto">
            Agregar Escuela
          </a>
        </div>
      </div>
    </div>

    @if(isLoading()) {
    <div class="flex items-center justify-center h-80">
      <div class="relative">
        <div class="relative w-32 h-32">
          <div
            class="absolute w-full h-full rounded-full border-[3px] border-gray-100/10 border-r-[#5956e9] border-b-[#5956e9] animate-spin"
            style="animation-duration: 3s;"></div>
          <div
            class="absolute w-full h-full rounded-full border-[3px] border-gray-100/10 border-t-[#5956e9] animate-spin"
            style="animation-duration: 2s; animation-direction: reverse;"></div>
        </div>
        <div
          class="absolute inset-0 bg-gradient-to-tr from-[#5956e9]/10 via-transparent to-[#5956e9]/5 animate-pulse rounded-full blur-sm">
        </div>
      </div>
    </div>
    } @else {
    <!-- Tabla de Escuelas -->
    <div class="overflow-x-auto rounded-3xl shadow-[0_2px_6px_rgba(0,0,0,0.02)]">
      <table class="min-w-full divide-y divide-[#f0f1f8] dark:divide-slate-700">
        <thead class="bg-[#fafbfe] dark:bg-[#443a52]/50">
          <tr>
            <th scope="col" class="px-4 py-3 text-start text-xs font-semibold uppercase text-[#524380] dark:text-slate-300 tracking-wider">
              Escuela
            </th>
            <th scope="col" class="px-4 py-3 text-start text-xs font-semibold uppercase text-[#524380] dark:text-slate-300 tracking-wider">
              Información de Contacto
            </th>
            <th scope="col" class="px-4 py-3 text-start text-xs font-semibold uppercase text-[#524380] dark:text-slate-300 tracking-wider">
              Estadísticas
            </th>
            <th scope="col" class="px-2 py-3 text-center text-xs font-semibold uppercase text-[#524380] dark:text-slate-300 tracking-wider
         sm:static sticky right-0 bg-[#f9f9fe] dark:bg-[#2A2433] z-30 w-16 min-w-[4rem]">
              Acciones
            </th>
          </tr>
        </thead>
        <tbody class="divide-y divide-[#f0f1f8] dark:divide-slate-700">
          @for (escuela of escuelasPaginadas(); track escuela.id) {
          <tr class="bg-white dark:bg-[#2A2433] hover:bg-[#fcfdfe] dark:hover:bg-[#443a52] transition-colors duration-200">

            <!-- Columna Escuela - Información Principal -->
            <td class="px-4 py-3">
              <div class="flex items-start gap-3">
                <!-- Icono de la escuela -->
                <div class="shrink-0">
                  <div class="size-12 rounded-xl flex items-center justify-center shadow-2xs" [ngClass]="{
            'bg-[#f7f2fe] text-[#ff299c]': escuela.nivel === 'Primario',
            'bg-[#f5f9ff] text-[#9d4edd]': escuela.nivel === 'Secundario',
            'bg-[#f0f9f4] text-[#00a896]': escuela.nivel === 'Terciario',
            'bg-[#ebf3ff] text-[#5b4ff3]': escuela.nivel === 'Universitario'
          }">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"
                      color="currentColor" fill="none">
                      <path
                        d="M18 7C16.807 4.06817 13.9174 2 10.5423 2C6.10066 2 2.5 5.58172 2.5 10C2.5 14.4183 6.10066 18 10.5423 18C12.2197 18 13.7772 17.4892 15.0661 16.6153"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round"></path>
                      <path
                        d="M21.5 13C21.5 18.1004 17.1065 21.595 11.4999 21.9671C11.0444 21.9973 10.8167 22.0124 10.6584 21.8642C10.5 21.716 10.5 21.4773 10.5 21V18"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                      <circle cx="19" cy="12.5" r="2.5" stroke="currentColor" stroke-width="2"></circle>
                      <circle cx="10.5" cy="10" r="2" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                      </circle>
                    </svg>
                  </div>
                </div>

                <!-- Información de la escuela -->
                <div class="min-w-0 flex-1">
                  <!-- Nombre y nivel -->
                  <div class="flex items-center gap-2 mb-1">
                    <h3 class="text-base font-medium text-[#4e3e76] dark:text-[#E4E4E7]">{{ escuela.nombreCorto || escuela.nombreCompleto }}
                    </h3>
                    <!-- Badge de nivel -->
                    <span class="inline-flex items-center px-2 py-0.5 rounded-lg text-xs font-medium shadow-2xs"
                      [ngClass]="{
              'bg-[#f7f2fe] text-[#ff299c]': escuela.nivel === 'Primario',
              'bg-[#f5f9ff] text-[#9d4edd]': escuela.nivel === 'Secundario',
              'bg-[#f0f9f4] text-[#00a896]': escuela.nivel === 'Terciario',
              'bg-[#ebf3ff] text-[#5b4ff3]': escuela.nivel === 'Universitario'
            }">
                      {{ escuela.nivel }}
                    </span>
                  </div>

                  <!-- Nombre completo -->
                  <p class="text-sm text-[#9291aa] dark:text-slate-400 line-clamp-1 mb-2 leading-relaxed">
                    {{ escuela.nombreCompleto }}
                  </p>

                  <!-- Información adicional -->
                  <div class="flex items-center gap-3 text-xs text-[#9291aa] dark:text-slate-400">
                    <!-- Director -->
                    @if (directoresMap[escuela.director]) {
                    <span class="flex items-center gap-1">
                      @if (directoresMap[escuela.director].perfil) {
                      <img class="size-4 rounded-full object-cover" [src]="directoresMap[escuela.director].perfil"
                        [alt]="directoresMap[escuela.director].nombre">
                      } @else {
                      <svg class="size-3 text-[#9291aa]" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                      </svg>
                      }
                      {{ directoresMap[escuela.director].nombre }} {{ directoresMap[escuela.director].apellido }}
                    </span>
                    }


                    <!-- CUE -->
                    <span class="flex items-center gap-1">
                      <svg class="size-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2" />
                      </svg>
                      {{ escuela.cue }}
                    </span>
                  </div>
                </div>
              </div>
            </td>

            <!-- Columna Información de Contacto -->
            <td class="px-4 py-3">
              <div class="space-y-3">
                <!-- Email -->
                @if (escuela.email) {
                <div class="flex items-center gap-2">
                  <span
                    class="inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium bg-[#ebf3ff] text-[#5b4ff3] shadow-2xs dark:bg-blue-900/50 dark:text-blue-400">
                    <svg class="size-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                    </svg>
                  </span>
                  <span class="text-sm text-[#9291aa] dark:text-slate-400 truncate flex-1">{{ escuela.email }}</span>
                </div>
                }

                <!-- Teléfono -->
                @if (escuela.telefono) {
                <div class="flex items-center gap-2">
                  <span
                    class="inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium bg-[#f0f9f4] text-[#00a896] shadow-2xs dark:bg-green-900/50 dark:text-green-400">
                    <svg class="size-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                    </svg>
                  </span>
                  <span class="text-sm text-[#9291aa] dark:text-slate-400">{{ escuela.telefono }}</span>
                </div>
                }

                <!-- Página Web -->
                @if (escuela.paginaWeb) {
                <div class="flex items-center gap-2">
                  <a [href]="escuela.paginaWeb" target="_blank"
                    class="inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium bg-[#fdf2f8] text-[#e91e63] shadow-2xs hover:bg-[#fce7f3] dark:bg-pink-900/50 dark:text-pink-400 transition-colors">
                    <svg class="size-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9m0 9c-5 0-9-4-9-9s4-9 9-9" />
                    </svg>
                  </a>
                  <a [href]="escuela.paginaWeb" target="_blank"
                    class="text-sm text-[#5956e9] dark:text-purple-400 hover:text-[#4a47d8] truncate flex-1 transition-colors">
                    {{ escuela.paginaWeb }}
                  </a>
                </div>
                }

                <!-- Dirección -->
                @if (escuela.direccion) {
                <div class="flex items-center gap-2">
                  <span
                    class="inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium bg-[#fffae5] text-[#f06543] shadow-2xs dark:bg-orange-900/50 dark:text-orange-400">
                    <svg class="size-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                  </span>
                  <span class="text-sm text-[#9291aa] dark:text-slate-400 truncate flex-1">{{ escuela.direccion }}</span>
                </div>
                }

                <!-- Mensaje cuando no hay información -->
                @if (!escuela.email && !escuela.telefono && !escuela.paginaWeb && !escuela.direccion) {
                <div class="text-center py-2">
                  <span class="text-xs text-[#9291aa] dark:text-slate-500 italic">Sin información de contacto</span>
                </div>
                }
              </div>
            </td>
            <!-- Columna Estadísticas -->
            <td class="px-4 py-3">
              <div class="space-y-3">
                <!-- Barra de progreso - Alumnos -->
                <div class="space-y-1">
                  <div class="flex justify-between text-xs">
                    <span class="text-[#9291aa] dark:text-slate-400">Alumnos</span>
                    <span class="font-medium text-[#4e3e76] dark:text-slate-200">{{ escuela.cantAlumnos || 0 }}</span>
                  </div>
                  <div class="w-full bg-[#f0f1f8] dark:bg-slate-700 rounded-full h-2">
                    <div class="bg-[#ffb2c5] h-2 rounded-full"
                      [style.width.%]="calcularPorcentaje(escuela.cantAlumnos || 0, 1000)"></div>
                  </div>
                </div>

                <!-- Personal -->
                <div class="flex items-center justify-between text-xs">
                  <div class="flex items-center gap-4">
                    <span class="flex items-center gap-1 text-[#9291aa] dark:text-slate-400">
                      <svg class="size-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                      </svg>
                      {{ escuela.cantDocentes || 0 }} doc.
                    </span>
                    <span class="flex items-center gap-1 text-[#9291aa] dark:text-slate-400">
                      <svg class="size-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                      </svg>
                      {{ escuela.cantAdministrativos || 0 }} adm.
                    </span>
                  </div>
                  <!-- Badge con tooltip -->
                  <div class="relative group">
                    <span
                      class="inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium bg-[#5956e9] text-white shadow-2xs cursor-help">
                      <svg class="size-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                      </svg>
                      {{ (escuela.cantEmpleados || 0) }} total
                    </span>
                    <!-- Tooltip -->
                    <div
                      class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50">
                      Personal total de la escuela
                      <div
                        class="absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900">
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Matrícula -->
                @if (escuela.matriculaTotal) {
                <div class="flex items-center gap-2 text-xs">
                  <svg class="size-3 text-[#9291aa]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                  </svg>
                  <span class="text-[#9291aa] dark:text-slate-400">Matrícula: </span>
                  <span class="font-medium text-[#4e3e76] dark:text-slate-200">{{ escuela.matriculaTotal }}</span>
                </div>
                }
              </div>
            </td>


            <!-- Columna Acciones -->
            <td
              class="px-2 py-3 whitespace-nowrap text-center sm:static sticky right-0 bg-white dark:bg-[#2A2433] z-40 w-16 min-w-[4rem]">
              <div class="relative">
                <div class="hs-dropdown [--placement:bottom-right] inline-block">
                  <button type="button"
                    class="hs-dropdown-toggle p-1.5 inline-flex justify-center items-center rounded-full text-[#9291aa] hover:bg-[#f0f1f8] dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-[#5956e9] transition-all duration-200 ease-out">
                    <svg class="size-4" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                      viewBox="0 0 16 16">
                      <path
                        d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z" />
                    </svg>
                  </button>

                  <!-- Menú desplegable -->
                  <div
                    class="hs-dropdown-menu transition-[opacity,margin] duration hs-dropdown-open:opacity-100 opacity-0 hidden min-w-40 z-[9999] bg-white dark:bg-[#1A1A1E] dark:border dark:border-slate-700 shadow-[0_2px_6px_rgba(0,0,0,0.05)] rounded-2xl p-2 mt-2">
                    <div class="first:pt-0 last:pb-0">
                      <span class="block py-2 px-3 mb-2 text-xs font-medium uppercase text-[#9291aa] dark:text-slate-400">Acciones</span>
                      <a class="flex items-center gap-x-3 py-2 px-3 rounded-lg text-sm text-[#796ffc] hover:bg-[#f9f9fe] dark:hover:bg-slate-700 transition-colors duration-200"
                        [routerLink]="['form-escuela', escuela.id]">
                        <svg class="size-[18px]" xmlns="http://www.w3.org/2000/svg" width="128" height="128"
                          viewBox="0 0 24 24">
                          <g fill="currentColor">
                            <path
                              d="m12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036q-.016-.004-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.016-.018m.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01z" />
                            <path fill="currentColor"
                              d="M19 19a1 1 0 0 1 .117 1.993L19 21h-7a1 1 0 0 1-.117-1.993L12 19zm.631-14.632a2.5 2.5 0 0 1 0 3.536L8.735 18.8a1.5 1.5 0 0 1-.44.305l-3.804 1.729c-.842.383-1.708-.484-1.325-1.326l1.73-3.804a1.5 1.5 0 0 1 .304-.44L16.096 4.368a2.5 2.5 0 0 1 3.535 0M6 1a1 1 0 0 1 .946.677l.13.378a3 3 0 0 0 1.869 1.87l.378.129a1 1 0 0 1 0 1.892l-.378.13a3 3 0 0 0-1.87 1.869l-.129.378a1 1 0 0 1-1.892 0l-.13-.378a3 3 0 0 0-1.869-1.87l-.378-.129a1 1 0 0 1 0-1.892l.378-.13a3 3 0 0 0 1.87-1.869l.129-.378A1 1 0 0 1 6 1" />
                          </g>
                        </svg>
                        Editar
                      </a>
                    </div>
                    <div class="first:pt-0 last:pb-0">
                      <a class="flex items-center gap-x-3 py-2 px-3 rounded-lg text-sm text-[#e77833] hover:bg-[#fef9f9] dark:hover:bg-slate-700 transition-colors duration-200 cursor-pointer"
                        (click)="eliminarEscuela(escuela.id!, escuela.nombreCompleto!)">
                        <svg class="size-[18px]" xmlns="http://www.w3.org/2000/svg" width="128" height="128"
                          viewBox="0 0 48 48">
                          <path fill="currentColor" fill-rule="evenodd"
                            d="M3.842 27.88a7.92 7.92 0 0 1 0-8.76c3.23-4.872 7.107-8.528 9.356-10.443c1.452-1.237 3.258-1.857 5.087-1.931C20.838 6.642 25.196 6.5 30 6.5c3.443 0 6.764.073 9.364.152c3.76.115 6.808 3.052 6.956 6.846A258 258 0 0 1 46.5 23.5c0 4.158-.083 7.51-.18 10.002c-.148 3.794-3.196 6.73-6.956 6.846c-2.6.08-5.921.152-9.364.152c-4.804 0-9.162-.142-11.715-.246c-1.829-.074-3.635-.695-5.087-1.931c-2.249-1.916-6.125-5.57-9.356-10.443m33.54-7.851c.67-.724.86-1.742.26-2.526c-.251-.33-.58-.712-1.005-1.137A11.5 11.5 0 0 0 35.5 15.36c-.784-.599-1.802-.409-2.526.261a187 187 0 0 0-3.969 3.813a186 186 0 0 0-3.967-3.81c-.724-.671-1.742-.861-2.526-.262c-.33.252-.711.58-1.137 1.005c-.425.426-.753.808-1.005 1.137c-.6.784-.41 1.802.261 2.526a186 186 0 0 0 3.811 3.967c-1.868 1.9-3.073 3.17-3.817 3.973c-.67.724-.86 1.742-.26 2.526c.251.33.579.712 1.005 1.137s.807.754 1.136 1.005c.785.6 1.802.41 2.526-.26c.804-.744 2.074-1.95 3.973-3.818c1.9 1.87 3.171 3.075 3.975 3.819c.724.67 1.742.86 2.526.261c.33-.252.711-.58 1.137-1.005c.425-.426.753-.808 1.005-1.137c.6-.784.41-1.802-.261-2.526c-.744-.803-1.95-2.075-3.819-3.975a187 187 0 0 0 3.813-3.968Z"
                            clip-rule="evenodd" />
                        </svg>
                        Eliminar
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </td>
          </tr>
          } @empty {
          <tr>
            <td colspan="4" class="text-center p-10 text-[#9291aa] dark:text-slate-400">
              No se encontraron escuelas con los filtros seleccionados.
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>

    <!-- Paginación -->
    <div class="mt-8 flex justify-center">
      <nav class="flex justify-center items-center gap-x-1" aria-label="Pagination">
        <button type="button"
          class="min-h-9.5 min-w-9.5 py-2 px-2.5 inline-flex justify-center items-center gap-x-2 text-sm rounded-lg text-[#707078] dark:text-slate-400 hover:bg-[#f0f1f8] dark:hover:bg-slate-700 focus:outline-none focus:bg-[#f0f1f8] disabled:opacity-50 disabled:pointer-events-none transition-all duration-200"
          aria-label="Previous" [disabled]="paginaActual() === 1" (click)="irAPagina(paginaActual() - 1)">
          <svg class="shrink-0 size-3.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m15 18-6-6 6-6"></path>
          </svg>
          <span class="sr-only">Previous</span>
        </button>

        <div class="flex items-center gap-x-1">
          @for (page of paginasDisponibles(); track page) {
          <button type="button" (click)="irAPagina(page)"
            [ngClass]="{'bg-[#5956e9] text-white shadow-sm': paginaActual() === page, 'text-[#707078] dark:text-slate-400 hover:bg-[#f0f1f8] dark:hover:bg-slate-700': paginaActual() !== page}"
            class="min-h-9.5 min-w-9.5 flex justify-center items-center py-2 px-3 text-sm rounded-lg focus:outline-none disabled:opacity-50 disabled:pointer-events-none transition-all duration-200"
            [attr.aria-current]="paginaActual() === page ? 'page' : null">
            {{ page }}
          </button>
          }
        </div>

        <button type="button"
          class="min-h-9.5 min-w-9.5 py-2 px-2.5 inline-flex justify-center items-center gap-x-2 text-sm rounded-lg text-[#707078] dark:text-slate-400 hover:bg-[#f0f1f8] dark:hover:bg-slate-700 focus:outline-none focus:bg-[#f0f1f8] disabled:opacity-50 disabled:pointer-events-none transition-all duration-200"
          aria-label="Next" [disabled]="paginaActual() === totalPaginas()" (click)="irAPagina(paginaActual() + 1)">
          <span class="sr-only">Next</span>
          <svg class="shrink-0 size-3.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m9 18 6-6-6-6"></path>
          </svg>
        </button>
      </nav>
    </div>
    }
  </div>
</div>

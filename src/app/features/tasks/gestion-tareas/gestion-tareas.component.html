<!-- task-list.component.html -->
<div class="max-w-8xl px-1 py-10 sm:px-2 lg:px-4 mx-auto font_outfit">
  <div class="bg-[#fcfdfe] rounded-3xl p-4 sm:p-4 shadow-[0_2px_6px_rgba(0,0,0,0.05)]">
    <!-- Header de la sección de tareas -->
    <!-- Header de la sección de tareas -->
    <div class="mb-8">
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-end gap-4">
        <!-- Título y descripción a la izquierda -->
        <div class="flex-grow">
          <h2 class="text-xl font-semibold text-[#2d2c63]">Gestión de Tareas</h2>
          <p class="text-sm text-[#9291aa] mt-2">
            Administra de forma eficiente las tareas de tu plataforma.
          </p>

          <!-- Barra de búsqueda ahora debajo de la descripción -->
          <div class="mt-4 relative max-w-md">
            <input type="text" id="task-search-input" (input)="onBusquedaChange($event)"
              class="py-2.5 px-4 ps-11 block w-full bg-white rounded-xl text-sm text-[#707078] focus:border-[#5956e9] focus:ring-[#5956e9] shadow-2xs"
              placeholder="Buscar tareas...">
            <div class="absolute inset-y-0 start-0 flex items-center pointer-events-none ps-4">
              <svg class="size-4 text-[#9291aa]" viewBox="0 0 16 16" fill="currentColor">
                <path
                  d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
              </svg>
            </div>
          </div>
        </div>

        <!-- Controles a la derecha (pegados a la pared) -->
        <div class="flex flex-col sm:flex-row items-end gap-3 w-full sm:w-auto">
          <!-- Filtros -->
          <div class="flex flex-col sm:flex-row gap-3">
            @if (empleados().length > 0) {

            <select (change)="onFiltroEmpleadoChange($event)" data-hs-select='{
  "placeholder": "Select option...",
  "toggleTag": "<button type=\"button\" aria-expanded=\"false\"></button>",
  "toggleClasses": "hs-select-disabled:pointer-events-none hs-select-disabled:opacity-50 relative py-2.5 px-4 flex gap-x-2 text-nowrap w-full cursor-pointer bg-white text-[#707078]  min-w-[180px] shadow-2xs rounded-lg text-start text-sm focus:outline-hidden focus:ring-2 focus:ring-blue-500",
  "dropdownClasses": "mt-2 z-50 w-full max-h-72 p-1 space-y-0.5 bg-white rounded-3xl shadow-2xs overflow-hidden overflow-y-auto [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300",
  "optionClasses": "py-2 px-4 w-full text-sm text-gray-800 cursor-pointer hover:bg-gray-100 rounded-3xl focus:outline-hidden focus:bg-gray-100 hs-select-disabled:pointer-events-none hs-select-disabled:opacity-50",
  "optionTemplate": "<div class=\"flex justify-between items-center text-[#707078]  w-full\"><span data-title></span><span class=\"hidden hs-selected:block\"><svg class=\"shrink-0 size-3.5 text-blue-600 \" xmlns=\"http:.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"/></svg></span></div>",
  "extraMarkup": "<div class=\"absolute top-1/2 end-3 -translate-y-1/2\"><svg class=\"shrink-0 size-3.5 text-gray-500 \" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"m7 15 5 5 5-5\"/><path d=\"m7 9 5-5 5 5\"/></svg></div>"
}' class="hidden">
              <option value="todos">Todos los Empleados</option>
              @for (emp of empleados(); track emp.uid) {
              <option [value]="emp.uid">{{ emp.apellido }} {{ emp.nombre }}</option>
              }
            </select>
            }


            <!-- Select -->
            <select (change)="onFiltroEstadoChange($event)" data-hs-select='{
  "placeholder": "Select option...",
  "toggleTag": "<button type=\"button\" aria-expanded=\"false\"></button>",
  "toggleClasses": "hs-select-disabled:pointer-events-none hs-select-disabled:opacity-50 relative py-2.5 px-4 flex gap-x-2 text-nowrap w-full cursor-pointer bg-white text-[#707078]  min-w-[160px] shadow-2xs rounded-lg text-start text-sm focus:outline-hidden focus:ring-2 focus:ring-blue-500",
  "dropdownClasses": "mt-2 z-50 w-full max-h-72 p-1 space-y-0.5 bg-white rounded-3xl shadow-2xs overflow-hidden overflow-y-auto [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300",
  "optionClasses": "py-2 px-4 w-full text-sm text-gray-800 cursor-pointer hover:bg-gray-100 rounded-3xl focus:outline-hidden focus:bg-gray-100 hs-select-disabled:pointer-events-none hs-select-disabled:opacity-50",
  "optionTemplate": "<div class=\"flex justify-between items-center text-[#707078]  w-full\"><span data-title></span><span class=\"hidden hs-selected:block\"><svg class=\"shrink-0 size-3.5 text-blue-600 \" xmlns=\"http:.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"/></svg></span></div>",
  "extraMarkup": "<div class=\"absolute top-1/2 end-3 -translate-y-1/2\"><svg class=\"shrink-0 size-3.5 text-gray-500 \" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"m7 15 5 5 5-5\"/><path d=\"m7 9 5-5 5 5\"/></svg></div>"
}' class="hidden">
              <option value="todos">Todos los Estados</option>
              <option value="Pendiente">Pendiente</option>
              <option value="En Proceso">En Proceso</option>
              <option value="Finalizada">Finalizada</option>
            </select>
            <!-- End Select -->
          </div>

          <!-- Botón Crear Tarea -->
          <a routerLink="form-tarea"
            class="py-2.5 px-6 inline-flex items-center justify-center gap-x-2 text-sm font-medium rounded-xl border border-transparent bg-[#5956e9] text-white hover:bg-[#4a47d8] transition-colors duration-200 whitespace-nowrap w-full sm:w-auto">
            Crear Tarea
          </a>
        </div>
      </div>
    </div>

    @if(isLoading()) {
    <div class="flex items-center justify-center h-80">
      <div class="relative">
        <div class="relative w-32 h-32">
          <div
            class="absolute w-full h-full rounded-full border-[3px] border-gray-100/10 border-r-[#5956e9] border-b-[#5956e9] animate-spin"
            style="animation-duration: 3s;"></div>
          <div
            class="absolute w-full h-full rounded-full border-[3px] border-gray-100/10 border-t-[#5956e9] animate-spin"
            style="animation-duration: 2s; animation-direction: reverse;"></div>
        </div>
        <div
          class="absolute inset-0 bg-gradient-to-tr from-[#5956e9]/10 via-transparent to-[#5956e9]/5 animate-pulse rounded-full blur-sm">
        </div>
      </div>
    </div>
    } @else {
    <!-- Tabla de Tareas -->
    <div class="overflow-x-auto rounded-3xl shadow-[0_2px_6px_rgba(0,0,0,0.02)]">
      <table class="min-w-full divide-y divide-[#f0f1f8]">
        <thead class="bg-[#fafbfe]">
          <tr>
            <th scope="col" class="px-4 py-3 text-start text-xs font-semibold uppercase text-[#524380] tracking-wider">
              Tarea
            </th>
            <th scope="col" class="px-4 py-3 text-start text-xs font-semibold uppercase text-[#524380] tracking-wider">
              Prioridad
            </th>
            <th scope="col" class="px-4 py-3 text-start text-xs font-semibold uppercase text-[#524380] tracking-wider">
              Progreso
            </th>
            <th scope="col" class="px-4 py-3 text-start text-xs font-semibold uppercase text-[#524380] tracking-wider">
              Vencimiento
            </th>
            <th scope="col" class="px-2 py-3 text-center text-xs font-semibold uppercase text-[#524380] tracking-wider
         sm:static sticky right-0 bg-[#f9f9fe] z-30 w-16 min-w-[4rem]">
              Acciones
            </th>
          </tr>
        </thead>
        <tbody class="divide-y divide-[#f0f1f8]">
          @for (tarea of tareasPaginadas(); track tarea.id) {
          <tr class="bg-white hover:bg-[#fcfdfe] transition-colors duration-200">
            <!-- Columna Tarea - Nuevo Estilo -->
            <td class="px-4 py-3">
              <div class="flex items-start gap-3">
                <!-- Avatar del empleado asignado -->
                <div class="shrink-0">
                  @if (tarea.fotoEmpleadoAsignado) {
                  <img class="size-10 rounded-xl object-cover shadow-2xs" [src]="tarea.fotoEmpleadoAsignado"
                    [alt]="tarea.nombreEmpleadoAsignado">
                  } @else {
                  <div class="size-10 rounded-xl flex items-center justify-center shadow-2xs">
                    <svg class="size-5 text-[#9291aa]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>
                  </div>
                  }
                </div>

                <!-- Información de la tarea -->
                <div class="min-w-0 flex-1">
                  <!-- Título y estado -->
                  <div class="flex items-center gap-2 mb-1">
                    <h3 class="text-base font-medium text-[#4e3e76]">{{ tarea.titulo }}</h3>
                    <!-- Badge de estado -->
                    <span class="inline-flex items-center px-2 py-0.5 rounded-lg text-xs font-medium shadow-2xs"
                      [ngClass]="{
            'bg-[#ebf3ff] text-[#5b4ff3]': tarea.estado === 'Pendiente',
            'bg-[#fffae5] text-[#f06543] ': tarea.estado === 'En Proceso',
            'bg-[#f0f9f4] text-[#00a896] ': tarea.estado === 'Finalizada'
          }">
                      {{ tarea.estado }}
                    </span>
                  </div>

                  <!-- Descripción -->
                  <p class="text-sm text-[#9291aa] line-clamp-2 mb-2 leading-relaxed">
                    {{ tarea.descripcion }}
                  </p>

                  <!-- Información adicional -->
                  <div class="flex items-center gap-3 text-xs text-[#9291aa]">
                    <span class="flex items-center gap-1">
                      <svg class="size-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                      </svg>
                      {{ tarea.nombreEmpleadoAsignado }}
                    </span>

                    <span class="flex items-center gap-1">
                      <svg class="size-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                      </svg>
                      {{ formatDate(tarea.fechaDeCreacion) | date:'dd/MM/yy' }}
                    </span>
                  </div>
                </div>
              </div>
            </td>

            <!-- Columna Prioridad -->
            <!-- Columna Prioridad - Nuevo Estilo -->
            <td class="px-4 py-3 whitespace-nowrap">
              <div class="flex flex-col items-start gap-1">
                <!-- Indicador visual de puntos -->
                <div class="flex items-center  gap-1">
                  @switch (tarea.prioridad) {
                  @case ('Baja') {
                  <span class="size-2 bg-[#2ecc71] rounded-full"></span>
                  <span class="size-2 bg-[#f0f1f8] rounded-full"></span>
                  <span class="size-2 bg-[#f0f1f8] rounded-full"></span>
                  <span class="size-2 bg-[#f0f1f8] rounded-full"></span>
                  }
                  @case ('Media') {
                  <span class="size-2 bg-[#f39c12] rounded-full"></span>
                  <span class="size-2 bg-[#f39c12] rounded-full"></span>
                  <span class="size-2 bg-[#f0f1f8] rounded-full"></span>
                  <span class="size-2 bg-[#f0f1f8] rounded-full"></span>
                  }
                  @case ('Alta') {
                  <span class="size-2 bg-[#e74c3c] rounded-full"></span>
                  <span class="size-2 bg-[#e74c3c] rounded-full"></span>
                  <span class="size-2 bg-[#e74c3c] rounded-full"></span>
                  <span class="size-2 bg-[#f0f1f8] rounded-full"></span>
                  }
                  @case ('Urgente') {
                  <span class="size-2 bg-[#e91e63] rounded-full"></span>
                  <span class="size-2 bg-[#e91e63] rounded-full"></span>
                  <span class="size-2 bg-[#e91e63] rounded-full"></span>
                  <span class="size-2 bg-[#e91e63] rounded-full"></span>
                  }
                  }
                </div>

                <!-- Texto de prioridad con estilo mejorado -->
                <span class="text-xs font-medium px-2 py-1 rounded-lg shadow-2xs" [ngClass]="{
        'bg-[#f0f9f4] text-[#2ecc71] ': tarea.prioridad === 'Baja',
        'bg-[#fef7ed] text-[#f39c12] ': tarea.prioridad === 'Media',
        'bg-[#fef2f2] text-[#e74c3c] ': tarea.prioridad === 'Alta',
        'bg-[#fdf2f8] text-[#e91e63] ': tarea.prioridad === 'Urgente'
      }">
                  {{ tarea.prioridad }}
                </span>
              </div>
            </td>

            <!-- Columna Progreso -->
            <td class="px-4 py-3 whitespace-nowrap">
              <div class="flex items-center gap-x-3">
                <span class="text-xs text-[#9291aa] w-12 text-end">{{ tarea.progreso }}%</span>
                <div class="flex w-full h-2 bg-[#f0f1f8] rounded-full overflow-hidden">
                  <div class="flex flex-col justify-center rounded-full overflow-hidden bg-[#ffb2c5]"
                    [style.width.%]="tarea.progreso"></div>
                </div>
              </div>
            </td>

            <!-- Columna Vencimiento -->
            <td class="px-4 py-3">
              <div class="flex flex-col items-start gap-1">
                @if(tarea.fechaDeVencimiento) {
                <!-- Fecha con indicador de estado -->
                <div class="flex items-center gap-2">
                  <svg class="size-4 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24"
                    height="24" color="#8579a4" fill="none">
                    <path d="M16 2V6M8 2V6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                      stroke-linejoin="round"></path>
                    <path
                      d="M13 4H11C7.22876 4 5.34315 4 4.17157 5.17157C3 6.34315 3 8.22876 3 12V14C3 17.7712 3 19.6569 4.17157 20.8284C5.34315 22 7.22876 22 11 22H13C16.7712 22 18.6569 22 19.8284 20.8284C21 19.6569 21 17.7712 21 14V12C21 8.22876 21 6.34315 19.8284 5.17157C18.6569 4 16.7712 4 13 4Z"
                      stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                    <path d="M3 10H21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                      stroke-linejoin="round"></path>
                    <path d="M11.9955 14H12.0045M11.9955 18H12.0045M15.991 14H16M8 14H8.00897M8 18H8.00897"
                      stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                  </svg>
                  <span class="text-sm font-medium text-[#8579a4]">
                    {{ formatDate(tarea.fechaDeVencimiento) | date:'dd/MM/yyyy' }}
                  </span>

                  <!-- Indicador de estado de vencimiento -->
                  @if (esTareaVencida(tarea)) {
                  <span
                    class="inline-flex items-center px-2 py-0.5 rounded-lg text-xs font-medium bg-[#fff7f8] text-[#fb3640]">
                    <svg class="size-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Vencida
                  </span>
                  } @else if (esTareaPorVencer(tarea)) {
                  <span
                    class="inline-flex items-center px-2 py-0.5 rounded-lg text-xs font-medium bg-[#ebf3ff] text-[#5b4ff3]">
                    <svg class="size-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Por vencer
                  </span>
                  }
                </div>

                <!-- Días restantes o transcurridos -->
                <div class="text-xs ml-6">
                  @if (diasRestantes(tarea) > 0) {
                  <span class="text-[#5b4ff3] font-medium">{{ diasRestantes(tarea) }} días restantes</span>
                  } @else if (diasRestantes(tarea) === 0) {
                  <span class="text-[#2ecc71] font-medium">Vence hoy</span>
                  } @else {
                  <span class="text-[#fb3640] font-medium">{{ -diasRestantes(tarea) }} días de retraso</span>
                  }
                </div>
                } @else {
                <!-- Sin fecha de vencimiento -->
                <div class="flex items-center gap-2 text-[#8579a4]">
                  <svg class="size-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                  <span class="text-sm italic">Sin fecha límite</span>
                </div>
                }
              </div>
            </td>

            <!-- Columna Acciones -->
            <td
              class="px-2 py-3 whitespace-nowrap text-center sm:static sticky right-0 bg-white z-40 w-16 min-w-[4rem]">
              <div class="relative">
                <div class="hs-dropdown [--placement:bottom-right] inline-block">
                  <button type="button"
                    class="hs-dropdown-toggle p-1.5 inline-flex justify-center items-center rounded-full text-[#9291aa] hover:bg-[#f0f1f8] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-[#5956e9] transition-all duration-200 ease-out">
                    <svg class="size-4" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                      viewBox="0 0 16 16">
                      <path
                        d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z" />
                    </svg>
                  </button>

                  <!-- Menú desplegable -->
                  <div
                    class="hs-dropdown-menu transition-[opacity,margin] duration hs-dropdown-open:opacity-100 opacity-0 hidden min-w-40 z-[9999] bg-white shadow-[0_2px_6px_rgba(0,0,0,0.05)] rounded-2xl p-2 mt-2">
                    <div class="first:pt-0 last:pb-0">
                      <span class="block py-2 px-3 mb-2 text-xs font-medium uppercase text-[#9291aa]">Acciones</span>
                      <a class="flex items-center gap-x-3 py-2 px-3 rounded-lg text-sm text-[#796ffc] hover:bg-[#f9f9fe] transition-colors duration-200"
                        [routerLink]="['form-tarea', tarea.id]">
                        <svg class="size-[18px]" xmlns="http://www.w3.org/2000/svg" width="128" height="128"
                          viewBox="0 0 24 24">
                          <g fill="currentColor">
                            <path
                              d="m12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036q-.016-.004-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.016-.018m.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01z" />
                            <path fill="currentColor"
                              d="M19 19a1 1 0 0 1 .117 1.993L19 21h-7a1 1 0 0 1-.117-1.993L12 19zm.631-14.632a2.5 2.5 0 0 1 0 3.536L8.735 18.8a1.5 1.5 0 0 1-.44.305l-3.804 1.729c-.842.383-1.708-.484-1.325-1.326l1.73-3.804a1.5 1.5 0 0 1 .304-.44L16.096 4.368a2.5 2.5 0 0 1 3.535 0M6 1a1 1 0 0 1 .946.677l.13.378a3 3 0 0 0 1.869 1.87l.378.129a1 1 0 0 1 0 1.892l-.378.13a3 3 0 0 0-1.87 1.869l-.129.378a1 1 0 0 1-1.892 0l-.13-.378a3 3 0 0 0-1.869-1.87l-.378-.129a1 1 0 0 1 0-1.892l.378-.13a3 3 0 0 0 1.87-1.869l.129-.378A1 1 0 0 1 6 1" />
                          </g>
                        </svg>
                        Editar
                      </a>
                    </div>
                    <div class="first:pt-0 last:pb-0">
                      <a class="flex items-center gap-x-3 py-2 px-3 rounded-lg text-sm text-[#e77833] hover:bg-[#fef9f9] transition-colors duration-200 cursor-pointer"
                        (click)="confirmarEliminacion(tarea)">
                        <svg class="size-[18px]" xmlns="http://www.w3.org/2000/svg" width="128" height="128"
                          viewBox="0 0 48 48">
                          <path fill="currentColor" fill-rule="evenodd"
                            d="M3.842 27.88a7.92 7.92 0 0 1 0-8.76c3.23-4.872 7.107-8.528 9.356-10.443c1.452-1.237 3.258-1.857 5.087-1.931C20.838 6.642 25.196 6.5 30 6.5c3.443 0 6.764.073 9.364.152c3.76.115 6.808 3.052 6.956 6.846A258 258 0 0 1 46.5 23.5c0 4.158-.083 7.51-.18 10.002c-.148 3.794-3.196 6.73-6.956 6.846c-2.6.08-5.921.152-9.364.152c-4.804 0-9.162-.142-11.715-.246c-1.829-.074-3.635-.695-5.087-1.931c-2.249-1.916-6.125-5.57-9.356-10.443m33.54-7.851c.67-.724.86-1.742.26-2.526c-.251-.33-.58-.712-1.005-1.137A11.5 11.5 0 0 0 35.5 15.36c-.784-.599-1.802-.409-2.526.261a187 187 0 0 0-3.969 3.813a186 186 0 0 0-3.967-3.81c-.724-.671-1.742-.861-2.526-.262c-.33.252-.711.58-1.137 1.005c-.425.426-.753.808-1.005 1.137c-.6.784-.41 1.802.261 2.526a186 186 0 0 0 3.811 3.967c-1.868 1.9-3.073 3.17-3.817 3.973c-.67.724-.86 1.742-.26 2.526c.251.33.579.712 1.005 1.137s.807.754 1.136 1.005c.785.6 1.802.41 2.526-.26c.804-.744 2.074-1.95 3.973-3.818c1.9 1.87 3.171 3.075 3.975 3.819c.724.67 1.742.86 2.526.261c.33-.252.711-.58 1.137-1.005c.425-.426.753-.808 1.005-1.137c.6-.784.41-1.802-.261-2.526c-.744-.803-1.95-2.075-3.819-3.975a187 187 0 0 0 3.813-3.968Z"
                            clip-rule="evenodd" />
                        </svg>
                        Eliminar
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </td>
          </tr>
          } @empty {
          <tr>
            <td colspan="5" class="text-center p-10 text-[#9291aa]">
              No se encontraron tareas con los filtros seleccionados.
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>

    <!-- Paginación -->
    <div class="mt-8 flex justify-center">
      <nav class="flex justify-center items-center gap-x-1" aria-label="Pagination">
        <button type="button"
          class="min-h-9.5 min-w-9.5 py-2 px-2.5 inline-flex justify-center items-center gap-x-2 text-sm rounded-lg text-[#707078] hover:bg-[#f0f1f8] focus:outline-none focus:bg-[#f0f1f8] disabled:opacity-50 disabled:pointer-events-none transition-all duration-200"
          aria-label="Previous" [disabled]="paginaActual() === 1" (click)="irAPagina(paginaActual() - 1)">
          <svg class="shrink-0 size-3.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m15 18-6-6 6-6"></path>
          </svg>
          <span class="sr-only">Previous</span>
        </button>

        <div class="flex items-center gap-x-1">
          @for (page of paginasDisponibles(); track page) {
          <button type="button" (click)="irAPagina(page)"
            [ngClass]="{'bg-[#5956e9] text-white shadow-sm': paginaActual() === page, 'text-[#707078] hover:bg-[#f0f1f8]': paginaActual() !== page}"
            class="min-h-9.5 min-w-9.5 flex justify-center items-center py-2 px-3 text-sm rounded-lg focus:outline-none disabled:opacity-50 disabled:pointer-events-none transition-all duration-200"
            [attr.aria-current]="paginaActual() === page ? 'page' : null">
            {{ page }}
          </button>
          }
        </div>

        <button type="button"
          class="min-h-9.5 min-w-9.5 py-2 px-2.5 inline-flex justify-center items-center gap-x-2 text-sm rounded-lg text-[#707078] hover:bg-[#f0f1f8] focus:outline-none focus:bg-[#f0f1f8] disabled:opacity-50 disabled:pointer-events-none transition-all duration-200"
          aria-label="Next" [disabled]="paginaActual() === totalPaginas()" (click)="irAPagina(paginaActual() + 1)">
          <span class="sr-only">Next</span>
          <svg class="shrink-0 size-3.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m9 18 6-6-6-6"></path>
          </svg>
        </button>
      </nav>
    </div>
    }
  </div>
</div>